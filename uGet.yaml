name: uGet
sources:
  - type: archive
    url: https://sourceforge.net/projects/urlget/files/uget%20%28stable%29/2.2.3/uget-2.2.3-1.tar.gz
    sha256: 11356e4242151b9014fa6209c1f0360b699b72ef8ab47dbeb81cc23be7db9049
  - type: patch
    path: gcc10.patch
  - type: file
    path: com.ugetdm.uGet.desktop
  - type: file
    path: com.ugetdm.uGet.appdata.xml

post-install:
  - icon_in="pixmaps/icons/hicolor/scalable/apps/uget-icon.svg";
    icon_out="uget-icon.png";
    for s in {16,22,24,32,48,64,72,96,128,192,256,512}; do
    rsvg-convert "${icon_in}" -w "${s}" -h "${s}" -a -f png -o "${icon_out}";
    [[ ! -f "${FLATPAK_DEST}/share/icons/hicolor/${s}x${s}/apps/${icon_out}" ]] || continue;
    install -p -D -m 0644 "${icon_out}" -t "${FLATPAK_DEST}/share/icons/hicolor/${s}x${s}/apps/";
    done;
  - install -p -D -m 0644 "com.ugetdm.uGet.appdata.xml" -t "${FLATPAK_DEST}/share/appdata/";
  - install -p -D -m 0644 "com.ugetdm.uGet.desktop" -t "${FLATPAK_DEST}/share/applications/";
  - install -p -D -m 0644 "COPYING" -t "${FLATPAK_DEST}/share/licenses/uget/";
